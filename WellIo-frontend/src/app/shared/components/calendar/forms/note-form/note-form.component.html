<div *ngIf="isOpen" class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-3 sm:p-4">
    <div class="glass-panel bg-skin-fill-lightest dark:bg-skin-fill-darker border border-border rounded-lg shadow-lg p-3 sm:p-4 md:p-6 w-full max-w-md">
        <h2 class="text-xl sm:text-2xl font-bold text-foreground mb-3 sm:mb-4">{{ note ? 'Modifica Nota' : 'Crea Nota' }}</h2>
        <form [formGroup]="noteForm" (ngSubmit)="onSubmit()" class="space-y-3 sm:space-y-4">
            <div>
                <label for="title" class="block text-sm font-medium text-foreground mb-1">Titolo</label>
                <input
                        type="text"
                        id="title"
                        formControlName="title"
                        class="w-full px-2 sm:px-3 py-1.5 sm:py-2 bg-background text-foreground rounded-md border border-input focus:outline-none focus:ring-2 focus:ring-skin-accent-light focus:border-transparent text-sm sm:text-base">
            </div>
            <div>
                <label for="content" class="block text-sm font-medium text-foreground mb-1">Contenuto</label>
                <textarea
                        id="content"
                        formControlName="content"
                        rows="4"
                        class="w-full px-2 sm:px-3 py-1.5 sm:py-2 bg-background text-foreground rounded-md border border-input focus:outline-none focus:ring-2 focus:ring-skin-accent-light focus:border-transparent text-sm sm:text-base"
                ></textarea>
            </div>
            <div>
                <label class="block text-sm font-medium text-foreground mb-1">Tags</label>
                <div class="flex flex-wrap gap-2">
                    <div *ngFor="let tag of tags" class="flex items-center">
                        <input
                                type="checkbox"
                                [id]="'tag-' + tag.id"
                                [value]="tag.id"
                                (change)="onTagChange($event)"
                                [checked]="isTagSelected(tag.id)"
                                class="mr-1 sm:mr-2 h-3 w-3 sm:h-4 sm:w-4 text-skin-accent-light focus:ring-skin-accent-light border-input rounded">
                        <label [for]="'tag-' + tag.id" class="text-xs sm:text-sm text-foreground">{{ tag.name }}</label>
                    </div>
                </div>
            </div>
            <div class="flex justify-end space-x-2 pt-3 sm:pt-4">
                <button
                        type="button"
                        (click)="cancel()"
                        class="px-3 sm:px-4 py-1.5 sm:py-2 rounded-md bg-skin-fill-light text-skin-base hover:bg-skin-fill-medium transition-colors text-xs sm:text-sm">
                    Annulla
                </button>
                <button
                        type="submit"
                        [disabled]="!noteForm.valid"
                        class="px-3 sm:px-4 py-1.5 sm:py-2 rounded-md bg-skin-fill-dark text-skin-base-dark hover:bg-skin-fill-medium transition-colors text-xs sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed">
                    {{ note ? 'Aggiorna' : 'Crea' }}
                </button>
            </div>
        </form>
    </div>
</div>

